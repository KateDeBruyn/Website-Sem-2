<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatiable" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Description goes here" />
    <meta name="author" content="Keighty Rose, Kate de Bruyn" />
    <meta name="keywords" content="game design, developer, streamer, blog" />
    <title>Visualisations by KeightyRose</title>
    <link rel="stylesheet" href="normalise.css" />
    <link rel="stylesheet" href="stylesheet.css" />
    <script
      src="https://kit.fontawesome.com/a7ac100429.js"
      crossorigin="anonymous"
    ></script>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="javascript.js"></script>
  </head>

  <body>
    <header>
      <nav>
        <input type="checkbox" id="check" />
        <label for="check" class="menu-bars"
          ><i class="fa-solid fa-bars"></i
        ></label>
        <label for="logo" id="logo">keightyrose</label>
        <ul>
          <li><a id="nav-button" href="index.html">Home</a></li>
          <li><a id="nav-button" href="blog.html">Blog</a></li>
          <li>
            <a id="nav-button-data" href="datavisualisation.html">Data V</a>
          </li>
          <li><a id="nav-button" href="dataart.html">Data Art</a></li>
          <li>
            <a id="nav-button" href="styleguide.html">Style Guide</a>
          </li>
        </ul>
      </nav>
    </header>
    <main>
      <div class="datav-container">
        <div class="index-item">
          <svg
            id="vizG1"
            width="600"
            height="400"
            transform="translate(10, 10)"
          ></svg>
          <!--transform="translate(30, 50)-->
          <script>
            // const dataG1 = [
            //   { name: "Nick Eh", days: 24 },
            //   { name: "Jojosaysbree", days: 26 },
            //   { name: "Altru", days: 15 },
            //   { name: "Dodorododo", days: 20 },
            // ];

            async function getDataG1() {
              const api_url =
                "https://www.cheapshark.com/api/1.0/deals?storeID=1&upperPrice=15";
              // Raw data
              const api_data = await fetch(api_url);

              // Converts raw data to json
              const api_json = await api_data.json();

              // const dataG1 = api_json.slice(0, 4);

              // Created a list of IDs for games that will be displayed
              const gameIds = ["166", "160047", "247672", "168082"];

              // dataG1 is the filtered list
              const dataG1 = api_json.filter(function (game) {
                // Returns a list of games that match our list of IDs
                if (gameIds.includes(game.gameID)) {
                  return game;
                }
              });

              let widthG1 = 600;
              let heightG1 = 300;
              let marginG1 = { top: 50, bottom: 50, left: 50, right: 50 };

              let vizAreaG1 = d3.select("#vizG1");

              vizAreaG1
                .append("svg")
                .attr("height", heightG1 - marginG1.top - marginG1.bottom)
                .attr("width", widthG1 - marginG1.left - marginG1.right)
                .attr("viewBox", [0, 0, widthG1, heightG1]);

              let xScaleG1 = d3
                .scaleBand()
                .range([marginG1.left, widthG1 - marginG1.right])
                .padding(0.1);

              let yScaleG1 = d3
                .scaleLinear()
                .domain([0, 100])
                .range([heightG1, marginG1.bottom - marginG1.top]);

              vizAreaG1
                .append("g")
                .attr("fill", "rgb(169, 112, 255)")
                .selectAll("rect")
                .data(
                  dataG1.sort((a, b) =>
                    d3.descending(a.steamRatingPercent, b.steamRatingPercent)
                  )
                )
                .join("rect")
                .attr("x", (d, i) => xScaleG1(i))
                .attr("y", (d) => yScaleG1(d.steamRatingPercent))
                .attr(
                  "height",
                  (d) => yScaleG1(0) - yScaleG1(d.steamRatingPercent)
                )
                .attr("width", xScaleG1.bandwidth());

              function xAxisG1(g) {
                g.attr(
                  "transform",
                  `translate(0, ${heightG1 - marginG1.bottom + 50})` //${marginG1}, ${heightG1 + marginG1.top}
                )
                  .call(
                    d3.axisBottom(xScaleG1).tickFormat((i) => dataG1[i].title)
                  )
                  .attr("font-size", "15px");
              }

              function yAxisG1(g) {
                g.attr("transform", `translate(${marginG1.left}, 0)`)
                  .call(d3.axisLeft(yScaleG1).ticks(null, dataG1.salePrice))
                  .attr("font-size", "15px");
              }

              vizAreaG1.append("g").call(yAxisG1);
              vizAreaG1.append("g").call(xAxisG1);
              vizAreaG1.node();

              //Credits to Crypters Infotech (D3.js : Draw A Scatter Plot Using D3.js) for the guidance. Link: https://www.youtube.com/watch?v=SMcD3q3E5lI&t=626s
            }
            this.getDataG1();
          </script>
        </div>
        <div class="index-item">
          A static graph showing how many days out of a month that Twitch
          streamers were live.
        </div>
        <div class="index-item">
          <svg
            id="vizG2"
            width="600"
            height="400"
            transform="translate(10, 10)"
          ></svg>
          <script>
            const dataG2 = [
              { assignment: 1, score: 54 },
              { assignment: 2, score: 67 },
              { assignment: 3, score: 94 },
              { assignment: 4, score: 76 },
              { assignment: 5, score: 52 },
              { assignment: 6, score: 68 },
              { assignment: 7, score: 75 },
              { assignment: 8, score: 90 },
            ];

            let width = 550;
            let height = 400;
            let margin = 50;

            let vizAreaG2 = d3.select("#vizG2");

            vizAreaG2
              .append("svg")
              .attr("height", height - margin.top - margin.bottom)
              .attr("width", width - margin.left - margin.right)
              .attr("viewBox", [0, 0, width, height])
              .attr("transform", `translate(${margin} , 10)`);

            let xScaleG2 = d3
              .scaleLinear()
              .domain([
                0,
                d3.max(dataG2, function (d) {
                  return d.assignment;
                }),
              ])
              .range([0, width - margin]);

            let yScaleG2 = d3
              .scaleLinear()
              .domain([0, 100])
              .range([height - margin, 0]);

            let xAxis = d3.axisBottom(xScaleG2);
            let yAxis = d3.axisLeft(yScaleG2);

            vizAreaG2
              .append("text")
              .attr("class", "x label")
              .attr("text-anchor", "end")
              .attr("x", width)
              .attr("y", height - 6)
              .attr("fill", "white")
              .text("Assignments");

            vizAreaG2
              .append("text")
              .attr("class", "y label")
              .attr("text-anchor", "end")
              .attr("y", 6)
              .attr("dy", ".75em")
              .attr("transform", "rotate(-90)")
              .attr("fill", "white")
              .text("Marks as percentages");

            vizAreaG2
              .append("g")
              .attr("transform", `translate(50, 350)`)
              .call(xAxis);
            vizAreaG2
              .append("g")
              .attr("transform", `translate(50, 0)`)
              .call(yAxis);

            let dots = vizAreaG2.append("g").selectAll("dot").data(dataG2);

            dots
              .enter()
              .append("circle")
              .attr("cx", function (d) {
                return xScaleG2(d.assignment);
              })
              .attr("cy", function (d) {
                return yScaleG2(d.score);
              })
              .attr("r", 8)
              .attr("transform", `translate(50, 0)`)
              .style("fill", "rgb(169, 112, 255)");

            //Credits to Crypters Infotech (D3.js : Draw A Scatter Plot Using D3.js) for the guidance. Link: https://www.youtube.com/watch?v=SMcD3q3E5lI&t=626s
          </script>
        </div>
        <div class="index-item">
          A static scatter plot showing a student's marks across eight
          assignments.
        </div>
      </div>
    </main>
  </body>
</html>
